---
title: "Punkt 3"
output: html_notebook
---


```{r}
suppressPackageStartupMessages({
library(PxWebApiData)
library(dplyr)
library(tidyverse)
library(lubridate)
library(REAT)
})
knitr::opts_chunk$set(echo = FALSE, include = FALSE)
```

I denne oppgaven skal vi finne sysselsetting i de ulike næringene, etter arbeidsstedskommune.

```{r}
knr <- c("1106", "1135", "1145", "1146", "1149", "1151", "1160")
```

```{r}
Haug_bo_raw <- ApiData(
  url = "07984",
  Region = list("vs:KommunerS", knr), 
  NACE2007 = TRUE,
  Kjonn = "0",
  ContentsCode = "Sysselsatte",
  Tid = c(as.character(2008:2020)),
  Alder = c("15-74", "55-66", "67-74"),
  makeNAstatus = FALSE
)
```


```{r}
Haug_bo <- Haug_bo_raw$`07984: Sysselsatte per 4. kvartal, etter region, næring (SN2007), kjønn, alder, statistikkvariabel og år` %>% 
  tibble() %>% 
  rename(
    Knr = region,
    Aar = år,
    Naering = `næring (SN2007)`
  )
```

```{r}
names(Haug_bo_raw)[1] <- "desc4"
```

```{r}
Haug_bo <- Haug_bo %>% 
  mutate(knavn = Haug_bo_raw$Knr)
```

```{r}
Haug_bo <- Haug_bo %>% 
  pivot_wider(
    names_from = c(Knr),
    values_from = value)
```


```{r}
Haug_bo = mutate(Haug_bo, tot_h = Haugesund+Sauda+Bokn+Tysvær+Karmøy+Utsira+Vindafjord)
```

# Sunnhordaland

```{r}
knr_sunn <- c("1211", "1216",
         "1219", "1221", "1222", "1223", "1224", "1228", "1231")
```

```{r}
Sunn_bo_raw <- ApiData(
  url = "07984",
  Region = list("vs:KommunerS", knr_sunn), 
  NACE2007 = TRUE,
  Kjonn = "0",
  ContentsCode = "Sysselsatte",
  Tid = c(as.character(2008:2020)),
  Alder = c("15-74", "55-66", "67-74"),
  makeNAstatus = FALSE
)
```


```{r}
Sunn_bo <- Sunn_bo_raw$`07984: Sysselsatte per 4. kvartal, etter region, næring (SN2007), kjønn, alder, statistikkvariabel og år` %>% 
  tibble() %>% 
  rename(
    Knr = region, 
    Naering = `næring (SN2007)`,
    Aar = år
  )
```

```{r}
names(Sunn_bo_raw)[[1]]<-"desc5"
```

```{r}
Sunn_bo <- Sunn_bo %>% 
  mutate(knavn = Sunn_bo_raw$Knr)
```

```{r}
Sunn_bo <- Sunn_bo %>% 
  pivot_wider(
    names_from = c(Knr),
    values_from = value)
```


```{r}
Sunn_bo = mutate(Haug_bo, tot_s = Etne)
```




```{r}
 Haug_bo%>% 
  ggplot(mapping = aes(x= Aar, y = )) +
  geom_line()+
  labs(title = "Haugalandet") +
  ylab("Antall ansatte i \n alle næringer") +
   theme(axis.title.y = element_text(angle=0))+
  scale_x_continuous(breaks = seq(2008, 2020, by = 1))

```


